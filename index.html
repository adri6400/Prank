<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Surprise!</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- SDK EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init({
                publicKey: "M-6tzdwk9Kf9X3aG4",
            }); // Remplace "YOUR_USER_ID" par ton User ID de EmailJS
        })();
    </script>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">
    <button onclick="showPrankForm()" class="px-6 py-3 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none">
        Clique ici!
    </button>

    <div id="prankForm" style="display: none;" class="mt-6 p-6 bg-white shadow-lg rounded-lg w-80">
        <h2 class="text-lg font-bold text-gray-700 mb-4">Formulaire de Blague</h2>
        <p class="text-sm text-gray-500 mb-6">Pour continuer, entrez les informations suivantes :</p>
        
        <label class="block text-sm font-medium text-gray-700">Identifiant secret de l’amitié :</label>
        <input type="text" id="friendId" placeholder="ex: 123-amitié" class="mt-1 block w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4">
        
        <label class="block text-sm font-medium text-gray-700">Code spécial de blague :</label>
        <input type="password" id="prankCode" placeholder="******" class="mt-1 block w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4">
        
        <button onclick="sendMessage()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
            Envoyer le message
        </button>
    </div>

    <script>
        function showPrankForm() {
            document.getElementById("prankForm").style.display = "block";
            alert('Surprise! Tu as cliqué sur le bouton!');
        }

        function sendMessage() {
            const friendId = document.getElementById("friendId").value;
            const prankCode = document.getElementById("prankCode").value;

            if (friendId && prankCode) {
                // Envoyer un email avec EmailJS
                emailjs.send("service_vus0eea", "template_915ogjt", {
                    friend_id: friendId,
                    prank_code: prankCode,
                    to_email: "bernardadrien26@gmail.com"
                })
                .then(response => {
                    console.log('E-mail envoyé !', response.status, response.text);
                    alert("Merci pour la blague ! Le résultat a été envoyé.");
                })
                .catch(err => console.error('Erreur lors de l\'envoi de l\'e-mail:', err));
            } else {
                alert("Veuillez entrer l'identifiant et le code !");
            }
        }
    </script>
</body>
</html>
